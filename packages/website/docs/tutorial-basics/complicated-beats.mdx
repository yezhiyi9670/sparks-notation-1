---
sidebar_position: 2
description: 编写更加复杂的节奏
---
import C from '@site/src/mdx'
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import * as Icons from 'react-icons/vsc'

# 节奏进阶 {#complicated-beats}

本节中，我们将介绍更复杂的节奏写法，主要包括减时线、附点、和三连音记号。

## tl;dr {#tldr}

- 减时线用小括号表示，一对小括号表示一条减时线。这个语法可以很自然地做到嵌套和分组。  
  例如 `1 (12) 3 (34) | (32) (12) 1`。
- 连音线写成音符后缀的形式，其中延长连音线需要在左侧音符后添加字符 `~`，联合连音线需要在两侧音符后添加字符 `^`。  
  例如 `3 (3^2^) (35~) 5~ | 5 (57d) 1 -`。
- 若要省略弱起小节开头的若干时值，用延时线 `-` 代替即可。
- 三连音的写法形如 `T(767)` 和 `T2 3 4`，前者是八分或更短的三连音，后者是四分三连音。
- 在乐理属性中使用形如 `hpm=60` `qpm=120` `spm=240` 的方式添加拍速。三者分别表示二分音符、四分音符和八分音符。
  - 在拍速记号后紧跟 `/<文本>`，可用模糊的文本（例如「较快」）代替拍速记号；紧跟 `/=<数值范围>`，可用数值范围（例如「65~75」）代替精确的数值。
- 将拍号的分子设为 `0`，将变为散板。
- 不完整小节右侧的小节线用 `/||` 表示。

## 基本节奏符号 {#basic-symbols}

### 减时线与附点 {#reducer-and-dot}

为了引入更加复杂节奏记号，我们来看一个更加复杂的例子。这是经典儿歌[《鲁冰花》](https://www.kuwo.cn/play_detail/582027)副歌的第一段。

<C.RealtimeScore noCode  children={
`P: 1=A 4/4
---
N: 2e (2e2e) 6 2e | (7^6^) (5^7^) 6 - | (4) 4 (5) 6 1e | 2e. (7) 6 - |
---
N: 2e (2e2e) 4e 2e | 1e. (6) 1e (1e^6^) | 5. (6) 5 5 | (3^2^) (1^3^) 2 - |
`
} />

<C.SpoilerAlert variant='info' title='探讨' desc={<>
	不应该写成 <code>6 66 3 6 | #43 24 3 -</code> 这样吗？
</>}>

结论跟上一个探讨一样，两种写法都不错。

这首歌的副歌部分实际上遵循中古音乐中的 Dorian 调式，即以 Re 为主音，Re Mi Fa Sol La Ti Do Re 构成音阶。按这种分析方式，应当采用上面图片中的写法。

但是如今，中古音乐调式很少使用，很多人可能更加习惯大小调。Dorian 恰好是与小调非常相似的，因此也可以（有的人认为更应该）写成以 La 为主音，La Ti Do Re Mi #Fa Sol La 为音阶的形式，这就是 `6 66 3 6 | #43 24 3 -`。

</C.SpoilerAlert>

现在，剧透一下，比 `2` 高一个八度的音在代码中应该写成 `2e`。对于节奏，附点音符的语法也是毫无疑问的，肯定是在音符后加一个 `.`。但是，减时线（下划线）怎么办？如果你来设计，你会怎么做（如果有空不妨自己想一想）？

Sparks NMN 对下划线定义的语法是**小括号**，小括号内的音符会被添加下划线，像 `2e (2e2e) 6 2e | (76) (57) 6 -` 这样。

<C.SpoilerAlert variant='info' title='设计思想' desc={
	'为什么用括号而不是什么长得像下划线的符号？'
}>

这里要说到文本与简谱之间的结构相似性。

简谱中，减时线是蕴含着分组的信息的。例如，对上述例子第一小节的第二个和第三个音符，我们并不能描述成「一个高音 Re，加一条下划线；另一个高音 Re，加一条下划线」，而是应该描述成「一个高音 Re；另一个高音 Re；它们下面有一条下划线，连起来的」。

如果采用 `_` 后缀来描述下划线，像 `2e 2e_2e_ 6 2e | 7_6_ 5_7_ 6 -`，分组的信息将丢失（或者说只能通过空格来表达），这是我们不希望看到的。如果这样，需要在渲染时进行「自动分组」，而「自动分组」就很难满足不同风格制谱人的意愿。此外，当节奏变得复杂，分组的整体感会进一步降低，导致可读性很差，比如这个 `X_X__X__ X__X__X___X___X__ X__X__X__X__ 0`。

相反，括号天生就是用来分组的，足够简洁，而且能够嵌套。此外，在自然语言中，小括号一般表示「不那么重要的解释说明」，因此用它来表示「不那么长的音符」也是天经地义的。看一看这个 `(X(XX)) ((XX(XX)X)) ((XXXX)) 0`，这和上面用下划线表示的例子是同一个节奏，但是不是看起来清晰多了？

</C.SpoilerAlert>

知道了这些以后，就不难编写出上面的片段对应的代码了。

<C.ScoreExample canLoad>{
`P: 1=A 4/4
---
N: 2e (2e2e) 6 2e | (76) (57) 6 - | (4) 4 (5) 6 1e | 2e. (7) 6 - |
---
N: 2e (2e2e) 4e 2e | 1e. (6) 1e (1e6) | 5. (6) 5 5 | (32) (13) 2 - |
`
}</C.ScoreExample>

:::tip 提示

Sparks NMN 也支持双附点或更多附点，只须在音符后加多个点即可实现。附点音符的时长是原音符的 1.5 倍，双附点就是 1.75 倍，以此类推。

:::

### 嵌套的减时线 {#nested-reducer}

减时线的括号语法是天然可以嵌套的。利用这点，也能轻松地写出一些更复杂的节奏。比如《森林狂想曲》的 A 段：

<C.RealtimeScore noCode  children={
`P: 1=? 4/4
---
N: ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 3d - |((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 6d - |
`
} />

再次剧透，比 `6` 低一个八度的音应该写成 `6d`。

<C.TryYourself />

这是参考答案：

<C.ScoreExample canLoad>{
`P: 1=? 4/4
---
N: ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 3d - |((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 6d - |
`
}</C.ScoreExample>

:::caution 常见错误

一般情况下，你不可以在减时线内部用延时线。通常这也没有任何意义。  
并且，任何情况下，你不能给一个环境中的音符在另一个环境内添加延时线，例如 `2 (12) - -`，尽管显示出来似乎是对的，但其实这样会使解析器误解，在音效试听（稍后介绍）中也会出现问题。

:::

<C.SpoilerAlert variant='info' title='拓展' desc={
	'第一和第三小节的空间有些紧张，音符被迫挤在一起，影响了乐谱的空间感。有救吗？'
}>

有两个办法。

一个是加大 1、3 小节的宽度（权重），挤占其他小节。效果并不理想，因为总宽度还是有限。

<C.ScoreExample canLoad>{
`P: 1=? 4/4
---
N: /{w=1.3} ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 3d - |{w=1.3} ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 6d - |
`
}</C.ScoreExample>

二是直接改变每行的小节数。

<C.ScoreExample canLoad>{
`P: 1=? 4/4
RenderProps: n=3
---
N: ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 3d - | ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 6d - |
`
}</C.ScoreExample>

如果是在比 A4 更大的纸张上印刷，可以直接调小缩放。

<C.ScoreExample canLoad>{
`P: 1=? 4/4
Rp: scale=0.85
---
N: ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 3d - | ((6d135)) (3(32)) (3(32)) (3(6d7d)) | ((1321)) (6d5d) 6d - |
`
}</C.ScoreExample>

关于调整布局的具体内容及其原理将在[布局](/docs/category/第二章-布局与字体)章节介绍。

</C.SpoilerAlert>

### 连音线 {#connector}

再看一看上面《鲁冰花》的例子。是不是少了点什么？

<C.RealtimeScore noCode  children={
`P: 1=A 4/4
---
N: 2e (2e2e) 6 2e | (76) (57) 6 - | (4) 4 (5) 6 1e | 2e. (7) 6 - |
---
N: 2e (2e2e) 4e 2e | 1e. (6) 1e (1e6) | 5. (6) 5 5 | (32) (13) 2 - |
`
} />

没错，少了五条连音线。这里连音线的含义是两个音共同对应歌词中的一个字。

#### 连音线的类型 {#connector-types}

如何加上连音线呢？在回答这个问题之前，需要先明确连音线的两种类型。

- 延长连音线：连音线连接相邻**两个音高相同**的音符，表示它们实际上**是一个音符**（时长相加），只是用两个音符来表示。如果需要有超过两个音时长相加，则它们需要**两两之间相连**，而不是用一条线连接首尾。
- 联合连音线：连接相邻的两个或更多音符中的**第一个和最后一个**，表示它们在演唱/弹奏时中间不应该断开，并且（可能）共同对应歌词中的一个字。被连接的多个音符仍然是多个音符。

Sparks NMN 对两种连音线的处理是有区别的，主要是这些：

- 按照语法规则，延长连音线只能连接到下一个音符，而不能选择其他音符。
- 处于延长连音线右端的音符会被「弱化」，也就是被标记为「无效」，不再能与歌词中的字进行配对。它的时值会被加到左端的音符上。而联合连音线不会产生这样的效果。

#### 添加连音线 {#add-connector}

添加延长连音线的方式是在其**左端音符后面添加 `~`**。例如《鲁冰花》主歌中的一句，

<C.RealtimeScore canLoad >{
`// preserve-start
P: 1=bB 4/4
// highlight-next-line
N: (04) (43) (41e~) 1e | (0) 7 (7) 7 6 | 6. (5~) 5 - | 0 0 0 0 |
// preserve-end
Lc: 才发现世上，一切都会变卦。`
}</C.RealtimeScore>

而前面《鲁冰花》副歌例子中的连音线显然属于联合连音线。联合连音线的写法是在其**两端的音符上都加上 `^` 后缀**。联合连音线是不可能首尾相连（如果这样应该合并成一个）或者嵌套的，后缀的语法设计也限制了这一点。

联合连音线跨越小节线或者内部有延长连音线时，排版算法会调整联合连音线的高度，避免两者的线条出现重合。

上面《鲁冰花》副歌的例子可以这么写：

<C.ScoreExample canLoad>{
`P: 1=A 4/4
---
// highlight-next-line
N: 2e (2e2e) 6 2e | (7^6^) (5^7^) 6 - | (4) 4 (5) 6 1e | 2e. (7) 6 - |
---
// highlight-next-line
N: 2e (2e2e) 4e 2e | 1e. (6) 1e (1e^6^) | 5. (6) 5 5 | (3^2^) (1^3^) 2 - |
`}</C.ScoreExample>

:::caution 避免滥用

你可能会发现 Sparks NMN 允许你用延长连音线连接音高不同的音符，比如 `(3~2) (1~3) 2 -`。请**不要**这么做，这样毫无疑问是不规范且错误的，而且未来版本中可能会禁止。

:::

:::tip 提示

两种连音线语法都支持跨碎片书写，因此不必将连音线作为划分碎片的依据。

:::

#### 可视化音符弱化 {#check-voiding}

为了使得编辑时能够检查出连音线类型的错误，也为了让乐谱对音乐初学者更加友好，可以在文档头中添加一行 `Rp: grayout=true`，开启弱化可视化功能。使用后，弱化的音符将具有一定的透明度。

<C.RealtimeScore inverse  canLoad>{
`P: 1=bB 4/4
// highlight-next-line
Rp: grayout=true
N: (04) (43) (41e~) 1e | (0) 7 (7) 7 6 | 6. (5~) 5~ - | 5 - - - |
`}</C.RealtimeScore>

:::info 拓展

`Rp:` 开头的行称为**渲染属性**，用于控制一些内容的显示方式、布局和字体。具体内容将在[布局](/docs/tutorial-layout/style-options#grayout)章节进行介绍。  
如果你急于知道全部，可以看看[记号速查表](/docs/reference/render-props)。

:::

### 弱起小节 {#upbeat}

有的（而且很多）旋律的第一个音并不落在重拍（一个小节的第一拍）上。这种现象称为「弱起小节」。

<C.RealtimeScore efRange={1} noCode children={
`P: 1=? 4/4
N: 0 0 (01) (12) | 3 5 (54) 3 | (22) (25) 5 (02) | 1 (07d) (17d) (16) | 5 -`
} />

为了简洁性，常常省略开头的休止符，像这样：

<C.RealtimeScore efRange={1} noCode children={
`P: 1=? 4/4
N: - - (-1) (12) | 3 5 (54) 3 | (22) (25) 5 (02) | 1 (07d) (17d) (16) | 5 -`
} />

但是，在 Sparks NMN 中，你并不能直接省去这些休止符。这会使得后面的音符靠左显示，并且 Sparks NMN 会认为你犯了错误，导致这一小节的时值不正确。

<C.RealtimeScore efRange={1}>{
`P: 1=? 4/4
// highlight-next-line
N: (1) (12) | 3 5 (54) 3 | (22) (25) 5 (02) | 1 (07d) (17d) (16) | 5 -
`}</C.RealtimeScore>

正确的做法是用延时线来填充这些空间。这些延时线会被隐藏，因为它们前面作用于任何音符。<C.MinVersion min='1.15.4' inline>这些占位的延时线可以放在减时线内，以占据非整数拍的时值。</C.MinVersion>

<C.ScoreExample canLoad>{
`P: 1=? 4/4
// highlight-next-line
N: - - (-1) (12) | 3 5 (54) 3 | (22) (25) 5 (02) | 1 (07d) (17d) (16) | 5 -
`}</C.ScoreExample>

:::caution 避免滥用

这个延时线占位语法只应该用于弱起小节开始的位置，其他地方不应该以任何理由使用。

:::

### 切分音符 {#split-notes}

切分音符是一种经常被专门拿出来讲的节奏类型，我们也拿出来讲讲。不妨从切分音符特别多的[《Let It Go》](https://www.kuwo.cn/play_detail/3625972)中找一个例子。

<C.RealtimeScore hide efRange='musicLine--13' children={
`Dp: 电影《冰雪奇缘》曲集 - 05
Dt: Let It Go
Dv: Version 20220203
P: 1=$C4 4/4 qpm=136
Rp: n=4 page=A4 grayout=true left_separator=false margin_before_line=2.0 \
    font_lyrics=Roman,CommonSerif/600/0.93 font_annotation4=RomanItalic/400 font_annotation2=楷体/400/1
Rp: note_count_lining=true
\
\
====
Frp: n=2
A[4]: "1" "1" "2" "2" "3" "3" "4" "4" | "1" "1" "2" "2" "3" "3" "4" "4" | // 这只是用来辅助数拍子的符号
N: /{4/2} (7)1e 7 (1e~)1e (1e)7 1e 7 (2) | (6)7 6 7(2) 5 - 4 - |
L:
---
Frp: n=2
N: (7)1e 7 1e(3) (1e)7 1e 7 (2) | (6)7 6 7(2) 5 - #4.(3) ||["A"]
A: 0 | 0 0 0 0 0 0 0 mp
Lw: %{17}The
---
Frp: n=2
N: /{w=1.4} 33 3(33) (3^2^1(11)) 0(11) | (22~)2~ (2216d~) 6d~ - 6d. (2) |
A[4]: "1" "1" "2" "2" "3" "3" "4" "4" | "1" "1" "2" "2" "3" "3" "4" "4" |
A[2]: r"悲伤,无奈地" 0 0 0 0 0 0 "掩盖我来时的足迹" |
A[2]: "今夜的山上白雪闪耀" |
Lw: snow glows white on the moun-%tain to-night not a foot-print to be seen. A
---
Frp: n=2
N:  (2333~) 3(55~) (53~) 3 - (11) | (23~) 3 (02) (12[sld]~) 2 - - - |
A[2]: "在自我封闭的国度"  0 0 0 0 0 0 "我仿佛是这里的女王" |
Lw: king-dom of I-so-la-tion, and it looks like I'm the queen.
---
Frp: n=2
N: 0(33~)(3) 5 (6~) (6) 5 (3~) (3) 5 (5~) | (5) 5 (4~) (4) 3 (3[(4)]~) 3 - - - |
A[2]: 0 "寒风呼啸，如同心中那翻涌的暴风雪" |
Lw: The wind is how-ling like this swir-ling storm in-side.
---
Frp: n=2
N: 0(23) (2)1(2~) 2(23) 21~ | 1 6d - - - - 0 0 ||["B"]
A: 0 mp 0 0 0 > - - | - ++p |
A[2]: 0 "再怎么努力，也无法隐藏" |
Lw: Coul-dn't keep it in, hea-ven knows I've tried_{0}
\
\
---
// highlight-start
N: /{4/4, "(接下来8小节主音为5)"} 0 (2) 2 5 (5~) | (50) (2) 2 6 (6~) | (60) (65) (6) 6 (5) | (6) 7 1e 7 (7~) |
A[2]: 0 | 0 | 0 "作为一个好女孩，你必须时刻记住"
A: 0 mf r"坚定地" |
A[2]: 0 "别让他们发现，别让他们看见"
Lw: “Don't let them in, don't let them see, be the good girl you al-ways have to be,
// highlight-end
---
N: (70) (2) 2 5 (5~) | (50) (2) 2 5 (6~) | 6~ - - - | 6 - 0 (56~) | (67~) 7 1e~ - ||["C"]
A: 0 mf | 0 (0) 0 0 (<) | - - - - | - - 0 f
A[2]: "隐藏真心，别让他们知道" | 0 | 0 | "然而，他们已经明白了"
Lw: Con-ceal don't feel, don't let them know”_{0} Well now they know_{0}
\
// ...
`
} />

这里谱面上的每个四分音符都属于切分音符。

<C.SpoilerAlert variant='info' title='探讨' desc='等等，这些玩意都叫切分音符吗？课上好像没有这么讲。'>

是的。

音乐课上常常介绍的「切分音符」节奏型 `(X) X (X)` 只是切分音符的一个特例。

只要被与自身长度同级的分划点等分成两份的音符，都是切分音符。例如，第一小节的四分音符 `2` `5` 分别被第二拍和第三拍的起始时刻切分成了二等份。这就是切分音符为什么叫「切分」音符。

上面 13、15 和 16 小节中两个及以上切分音符连在一起的节奏，称为「连续切分音」。

</C.SpoilerAlert>

编写切分音符并没有太多需要注意的点，只需要像之前一样使用减时线语法就可以了。

<C.ScoreExample canLoad>{
`P: 1=$C 4/4
// highlight-next-line
N: 0 (2) 2 5 (5~) | (50) (2) 2 6 (6~) | (60) (65) (6) 6 (5) | (6) 7 1e 7 (7~) |
`
}</C.ScoreExample>

不过如果你对简谱的规范理解不透彻，这里有一个要提醒的点，减时线的分组规则，并不是优先地将构成四分音符时长的音符组合在一起，像这样：

<C.RealtimeScore efRange={1} children={
`P: 1=? 4/4
// preserve-start
N: (3)3 (33)(33)(3) | (2)2 (22)(22)(2) | (4)4 (44)(44)(4) | 4 4 3 - |
// preserve-end
A: "反面教材！"
`
} />

正确的规则应该是在节拍组分划点（对于分母为 `4` 的拍号，可以认为是从小节开头起整数个四分音符处）断开减时线。

<C.RealtimeScore efRange={1} children={
`P: 1=? 4/4
// preserve-start
N: (3)3 (3)(33)(33) | (2)2 (2)(22)(22) | (4)4 (4)(44)(44) | 4 4 3 - |
// preserve-end
`
} />

### 三连音与多连音 {#triplet}

**三连音**是将一个规范音符（二分、四分、八分、十六分，等等）等分成三份的节奏类型。一般常见的三连音是将四分音符三等分，这给人一种流畅而急促的感觉。下面的片段来自音乐游戏《跳舞的线》中的音乐[《水晶》](https://music.163.com/#/program?id=2056672403)。

<C.RealtimeScore noCode efRange={[1,5]} children={
`P: 1=? 4/4
---
// highlight-next-line
N: 1e (01e) 7 (07) | 6 T(671e) 7 5 | 1e (01e) 7 (07) | 6 T(671e) 7 5 |
---
// highlight-next-line
N: 4 (04) 1e (01e) | 3 T(345) 4 3 | 4 (04) 1e (01e) | 3 T(345) 4 3 |`
} />

注意到这里三连音记号下面的三个音符实际上「长得像」八分音符，但是由于加了三连音记号，它们是四分音符的 $\frac{1}{3}$，也就是十二分音符。这样的音符也可以称为「八分三连音」（注意不是四分）。所以，总而言之，三连音记号的作用是将音符的**实际时值**变为**字面时值**的 $\frac{2}{3}$。

在 Sparks NMN 中，表示八分三连音或更短的三连音的方式是在其减时线的前面加上大写字母 `T`（表示 Triplet），这样这条减时线会将音符时值减少到 $\frac{1}{3}$ 而非 $\frac{1}{2}$。这个语法也保证了这些三连音必须单独被分成一组。

<C.ScoreExample canLoad children={
`P: 1=? 4/4
---
// highlight-next-line
N: 1e (01e) 7 (07) | 6 T(671e) 7 5 | 1e (01e) 7 (07) | 6 T(671e) 7 5 |
---
// highlight-next-line
N: 4 (04) 1e (01e) | 3 T(345) 4 3 | 4 (04) 1e (01e) | 3 T(345) 4 3 |
`} />

四分三连音比较特殊，是三连音但是没有减时线。在 Sparks NMN 中，只须在大写字母 `T` 后面直接跟三个音符即可解决问题。

<C.RealtimeScore efRange={1} children={
`P: 1=? 4/4
---
// highlight-next-line
N: 6. (5) T4 3 4 | (54) (32) 3 - | 4. (3) T2 3 4 | 5 - - 0 |
`
} />

:::info 提示

当然，你也可以用四分三连音的语法，形如 `6 (T671e) 7 5` 表示八分三连音，不过不推荐这么做。

:::

现在的流行音乐中，三连音并不算常用。不过，你最熟悉的三连音离你很近，就在《中华人民共和国国歌》里。

**多连音**在当前属于实验音乐特性，是三连音的一般化。由于实在不常用，教程中不进行介绍。具体写法见[记号速查表](/docs/reference/notes-reducing#n-plet)。

为了避免滥用三连音记号，下面提醒两种你可能觉得需要三连音记号，但实际上不需要的情况。

#### 三连音与 3-复拍子

如果你发现一段旋律里面全是八分三连音结构，所有四分音符都不是被二等分而是三等分，那么，你的记法大概率是不太对的。这时你需要把拍号的分子乘 3，分母乘 2，然后用复拍子的格式来书写。下面的例子来自音乐游戏《跳舞的线》中的音乐[《秋天》](https://music.163.com/#/program?id=2056679354)（原标题 Tranquil Settlement）。

<C.RealtimeScore efRange={1} children={
`P: 1=bE 4/4
---
// highlight-next-line
N: T(17d1) T(616) T(543) T(321) | T(5d~5d5d) T(1~15d) T(2~25d) T(3~35d) | 2 - - - | T(17d1) T(616) T(54e3e) T(3e2e1e) |
`} />

使用 $\frac{12}{8}$ 拍号重新记谱，看起来就舒服很多了。

<C.RealtimeScore efRange={1} children={
`P: 1=bE 12/8
---
// highlight-next-line
N: (17d1) (616) (543) (321) | 5d(5d) 1(5d) 2(5d) 3(5d) | 2~ - - 2 - - | (17d1) (616) (54e3e) (3e2e1e) |
`} />

#### 三连音与 3-3-2 节奏 {#triplet-and-332}

有一个流行音乐中经常使用的节奏型，称为 3-3-2 节奏型。它与四分三连音听起来非常相似，但是并不一样。

<C.RealtimeScore efRange={1} children={
`// preserve-start
P: 1=? 4/4
// highlight-next-line
N: 4 3 (3.(2~))(23) | (5.4.3)(2.1.2) |{t=0.5} 3 2 T2 1 2 | T4 3 2 1 - |
// preserve-end
A: 0 0 "3-3-2" | "3-3-2的简记" | 0 0 "四分三连音" |
`
} />

如你所见，3-3-2 节奏型是将两个四分音符的时长分成了 $3:3:2$ 的三份，而三连音则是分成 $3:3:3$ 的三份。它们之间非常相似，就差一点，许多认为四分三连音难以掌握的音乐初学者往往也是先用 3-3-2 作为它的近似，然后再进行微调。然而，另一方面，3 比 2 大了 50%，这样的差距是巨大的。

简而言之，四分三连音给人的感觉是均匀舒缓，而 3-3-2 节奏型听起来则富有弹性。如果你会使用一些简单的编曲软件，可以在软件中写一些旋律比较 3-3-2 和四分三连音的异同。

记谱的时候你也应当仔细考虑一下它们的区别。尤其是你在节奏并不算太慢的旋律中听到了类似四分三连音的东西，一定要认真考虑它是否有可能是 3-3-2。来看一个听起来富有弹性的例子，歌曲[《落日与晚风》](https://www.kuwo.cn/play_detail/183981434)的副歌开头。

<C.RealtimeScore efRange={[1,5]} children={
`P: 1=bA 4/4
---
// highlight-next-line
N: (1e.(3~)) (31e) (7.(5~)) 5 | (6.(1~)) (16) (5.(3~)) 3 | (4.(6d~)) (6d4) (3.(2~)) (21) | (22) (23) (2e1e) 7 |
Lc: 落日与晚风，深情地相拥，曾相遇的路口，记忆盘旋了很久。
---
N: (1e.(3~))(31e)(7.(5~))5 | (6.(1~))(16)(5.(3~))3 | (4.(6d~))(6d4)(3(21~))(17d) | (7d.(1~))(17d) 6d 0 |
Lc: 退后的借口，失落的相守，已无法再陪你到黑夜之后。
`} />

如果~~不小心~~写成了四分三连音，那可就糟糕了。

<C.RealtimeScore efRange={[1,5]} children={
`P: 1=bA 4/4
---
// highlight-next-line
N: T1e 3 1e T7 5~ 5 | T6 1 6 T5 3~ 3 | T4 6d 4 T3 2 1 | (22) (23) (2e1e) 7 |
Lc: 落日与晚风，深情地相拥，曾相遇的路口，记忆盘旋了很久。
---
N: T1e 3 1e T7 5~ 5 | T6 1 6 T5 3~ 3 | T4 6d 4 (3(21~))(17d) | T7d 1 7d 6d 0 |
Lc: 退后的借口，失落的相守，已无法再陪你到黑夜之后。
`} />

你可能并不能很直观地想象后者有多糟糕，事实上许多人都不能。幸运的是，Sparks NMN 在「<Icons.VscWand style={{transform: 'translateY(0.13em)'}} /> 乐谱检查工具」中提供了音效试听功能，可以将乐谱播放给你听，点击乐谱示例下方的「尝试」按钮进入编辑器即可使用。

#### 三连音与摇摆节奏 {#triplet-and-swing}

如果一段旋律中某种长度的规范音符全部被划分为 $2:1$ 的比例（例如所有八分音符都被划分为 $2:1$），那么这段旋律应该属于摇摆节奏型。摇摆节奏有专门的记法，比使用三连音要简洁很多，稍后就会提到。

## 编辑体验 - 检查错误 {#experiences}

众所周知，记录乐谱往往是容易出错的，特别是节奏复杂的那种，并且有些错误自己很难马上看出来。因此，我们在本节介绍两个和查错相关的特性。

### 时值校验 {#time-validation}

如果你自己尝试过编写这里所述的这些节奏，你很可能已经注意到，当你犯某些错误时小节右端会出现一个小色块。没错，Sparks NMN 会帮你判断小节内音符的总时值是否与拍号相符，以帮助你快速改正一些低级的错误。

比如你想要写一些八分三连音，却在某个地方忘了添加字母 `T`。

<C.RealtimeScore efRange='musicLine--5' inverse children={
`P: 1=? 4/4
---
N: 1e (01e) 7 (07) | 6 T(671e) 7 5 | 1e (01e) 7 (07) | 6 T(671e) 7 5 |
---
// highlight-next-line
N: 4 (04) 1e (01e) | 3 T(345) 4 3 | 4 (04) 1e (01e) | 3 (345) 4 3 |
`
} />

注意到这里第 8 小节末尾出现了一个蓝色色块，这意味着其中音符的总时值超出了你指定的拍号。这是因为当忘记字母 T 时，这个「三连音」中的音符就是八分音符，而非十二分音符。

如果音符的总时值少于拍号指定的量，则会出现橙色色块。

<C.RealtimeScore efRange='musicLine--5' inverse children={
`P: 1=? 4/4
---
N: 1e (01e) 7 (07) | 6 T(671e) 7 5 | 1e (01e) 7 (07) | 6 T(671e) 7 5 |
---
// highlight-next-line
N: 4 (04) 1e (01e) | 3 T(345) 4 3 | 4 (04) 1e (1e) | 3 T(345) 4 3 |
`
} />

有办法可以关闭这个特性，但是并不建议你这么做。大多数情况下，你应该尝试修复问题。

### 音效试听 {#listen-and-correct}

时值校验只能检查出一类特殊的错误。对于一些纸面上不那么明显的错误，将乐谱转化回旋律听一听或许是最为有效的检查方式。考虑到这一点，Sparks NMN 提供了音效试听功能，能够自动将乐谱以简单的音色播放出来。这一功能在试用模式与桌面应用中均可用。

要启用音效试听，可点击编辑器界面右下角的「<Icons.VscWand style={{transform: 'translateY(0.13em)'}} /> 乐谱检查工具」悬浮按钮，并在右侧弹出的窗口中选择「音效试听与结构检查」。

<C.ImageBlock src={require('./assets/test-play.png').default} style={{border: '1px solid #0002'}} />

窗口内容分为三部分：

- 最上面是播放控制。如果你不明白某个按钮的用途，可将鼠标悬浮在上面查看提示。
- 中间部分用来选择章节、反复次数和当前小节，某种意义上相当于进度条。
- 最下面用于控制不同声部的混音选项。其中按钮 M 是静音，S 是独奏，左侧滑杆用于调节声音的声像（左右）。

点击最底下的按钮可以将混音设置以注释形式写入乐谱代码中，方便以后加载。每次打开音效试听窗口时，若代码中存在已保存的设置，将会自动加载。

除了试音查错外，窗口中的「进度条」部分还可以用来检查乐谱的曲式结构是否正确，因此标题是「音效试听与结构检查」。曲式结构详细内容将在[反复与区分](/docs/category/第三章-反复与区分)章节中介绍。

:::caution 注意

目前，音效试听的目的主要是检查记谱中是否有明显错误，并不会正确处理装饰音、奏法记号、力度记号等复杂的内容，一般不能用来直接生成成品音频。

音效试听窗口内有一个「渲染」按钮，可以将当前乐谱渲染为音频文件并导出。目前，这是一个非常实验性的功能，可能出现严重问题，请谨慎对待。

:::

## 可读性注意事项 {#readability}

简谱是一种音乐语言，记下来的谱子是给人看的。因此，准确无误只是要求之一，一份好的乐谱还应当有良好的可读性。这里是关于可读性的一些规范。

### 不要对休止符延音或连音 {#no-void-connecting}

显然休止符不应当使用连音线，因为连音线对休止符是没有意义的，完全可以去掉。

此外，休止符也不应当使用延时线，因为延时线暗示着「拖长」「多坚持一会」，用在休止符上容易产生直觉上的误导。

<C.RealtimeScore efRange={1} children={
`// preserve-start
P: 1=C 4/4
---
// highlight-next-line
N: (32) (12) (30~) 0 | (21) (7d1) (20~) 0 | 0 - (12) (32) | 1 5d 1 0 |
// preserve-end
A: "反面教材！"
`
} />

<C.RealtimeScore efRange={1} children={
`P: 1=C 4/4
---
// highlight-next-line
N: (32) (12) (30) 0 | (21) (7d1) (20) 0 | 0 0 (12) (32) | 1 5d 1 0 |
`
} />

### 谨慎使用附点音符 {#dont-abuse-dots}

附点的含义是增加 50% 的时值，这对节奏划分是有暗示的。例如 `3.` 中，`3` 表示音高 Mi，长度为一个四分音符，`.` 表示再增加半个四分音符的长度（而不是 `3` 表示半个四分音符，`.` 表示一个四分音符）。

例如，对于下面的例子，

<C.RealtimeScore efRange={1} children={
`// preserve-start
P: 1=C 4/4
---
// highlight-next-line
N: 2~ (24~) 4 2 | 6~ (64~) 4 2 | 5~ (54~) 4 3 | 2 - - - |
// preserve-end
A: "A" (0 "B") | "A" (0 "B") | "A" (0 "B") |
`
} />

其中，标有 `A` 的音符按照节奏划分规则被分成了**一个加半个**四分音符，因此，毫无疑问是可以改写成附点音符的。但是，标有 `B` 的音符却被划分为**半个加一个**四分音符。这时，是否要使用附点表示，就需要慎重考虑。如果你面向的读者是乐理基础较好的人，那么用附点来表示是完全可以的，而且看起来更简洁。

<C.RealtimeScore efRange={1} children={
`// preserve-start
P: 1=C 4/4
---
// highlight-next-line
N: 2. 4. 2 | 6. 4. 2 | 5. 4. 3 | 2 - - - |
// preserve-end
A: "A" (0 "B") | "A" (0 "B") | "A" (0 "B") |
`
} />

但是如果你面向的读者可能是音乐初学者，那么你应当考虑到这些附点会对节奏划分造成不正确的暗示，从而使得他们产生困惑。他们所看到的可能无异于这样：

<C.RealtimeScore efRange={1} children={
`// preserve-start
P: 1=C 4/4
---
// highlight-next-line
N: 2. 4~(4) 2 | 6. 4~(4) 2 | 5. 4~(4) 3 | 2 - - - |
// preserve-end
A: "A" (0 "B") | "A" (0 "B") | "A" (0 "B") |
A: "这样的记法是错误的"
`
} />

这种情况下，最明智的做法还是用连音线表示这些标有 `B` 的音符，而非附点。

<C.RealtimeScore efRange={1} children={
`// preserve-start
P: 1=C 4/4
---
// highlight-next-line
N: 2. (4~) 4 2 | 6. (4~) 4 2 | 5. (4~) 4 3 | 2 - - - |
// preserve-end
A: "A" (0 "B") | "A" (0 "B") | "A" (0 "B") |
`
} />

### 断开被切分的节奏 {#break-split-notes}

切分音的概念上文已经提到。这里「被切分的节奏」是一个更加广泛的概念——如果将每一拍打下去的时刻比作刀，那么有的音符可能会被这些刀切开，这些音符就具有「被切分的节奏」。

具有被切分节奏的音符，不一定要使用连音线表示，有时可以直接写作一个音符。上面所述的切分音以及 3-3-2 节奏的简记都属于这样的例子。

<C.RealtimeScore noCode efRange={1} children={
`P: 1=? 4/4
N: (3)3 (3)(33)(33) | (2)2 (2)(22)(22) | (4)4 (4)(44)(44) | 4 4 3 - |`
} />

<C.RealtimeScore noCode efRange={1} children={
`P: 1=? 4/4
N: 4 3 (3.(2~))(23) | (5.4.3)(2.1.2) |{t=0.5} 3 2 T2 1 2 | T4 3 2 1 - |
A: 0 0 "3-3-2" | "3-3-2的简记" | 0 0 "四分三连音" |`
} />

但是，这样的记法完全隐藏掉了那把重要的「刀」，即某一拍的打下去的那一刻。这种情况下，要读懂乐谱上的节奏，就需要在脑中做一些计算，这同样会使音乐初学者困惑。当节奏变得过于复杂时，建议还是把这些音符拆开。

例如，三个以上的连续切分音，最好在合适的地方断开。下面的例子来源于毕业合唱歌曲《星火》。

<C.RealtimeScore efRange={1} children={
`P: 1=C 4/4
// highlight-next-line
N: 0 (44) (4) 6 (5~) | (5) 3 1e 5 (6) | (1e6) (1e6) (1e6) (1e^7^~) | (77~) 7~ - - !|
Lc: 越是撞击越能成长，你我的光芒势不可%挡。
`
} />

这里第 14 小节处有三个连续的切分音符。可以选择将中间那个断开，显示出第三拍的位置。

<C.RealtimeScore efRange={1} children={
`P: 1=C 4/4
// highlight-next-line
N: 0 (44) (4) 6 (5~) | (5) 3 (1e~)(1e) 5 (6) | (1e6) (1e6) (1e6) (1e^7^~) | (77~) 7~ - - !|
Lc: 越是撞击越能成长，你我的光芒势不可%挡。
`
} />

:::caution 常见错误

不要将拆分得到的两个音符的下划线连起来，因为它们中间的位置是第三拍打下去的时刻，本来就是应该分开的。

:::

再比如，节奏已经过于复杂的时候，应当拆开具有被切分节奏的音符，避免使问题进一步复杂化。下面例子是《Let It Go》插曲版本的前奏。

<C.RealtimeScore efRange={1} children={
`P: 1=$C 4/4
---
Frp: n=2
// highlight-next-line
N: ((7)1e7(1e~)1e) ((1e)71e 7 (2)) | ((6)7 6 7(2)) 5 4 |
`
} />

毫无可读性，不是吗？只要将具有被切分节奏的音符断开，问题就能得到很大改善。

<C.RealtimeScore efRange={1} children={
`P: 1=$C 4/4
---
Frp: n=2
// highlight-next-line
N: ((7)1e(7~))((71e~)1e) ((1e)7(1e~))((1e) 7 (2)) | ((6)7(6~)) ((6)7(2)) 5 4 |
`
} />

:::info 提示

注意到这里有一行 `Rp: n=2`。这也是一个渲染属性，控制每行的小节数。

:::

## 添加拍速 {#beats-speed}

目前我们的乐谱还缺少一个基本的节奏信息，那就是拍速。

我们平时常常用 BPM（Beats per minute，每分钟的节拍数量）描述拍速。但是实际上，在乐谱中应当使用每分钟的二分音符、四分音符或八分音符数量（总之，应当使用全音长度，而非拍数）来指定拍速。至于为什么，可以看一个例子。

<C.RealtimeScore noCode children={
`// highlight-next-line
P: 1=? 6/8 spm=128
---
N: 4 (3) 1 (2) | 2 - - |{3/4} 3 2 1 | 7d 1 2 |
`
} />

这段旋律一开始的拍号为 $\frac{6}{8}$，并且指定每分钟 128 个八分音符，因此一开始的拍速是 128 BPM。当拍号转变为 $\frac{3}{4}$ 时，仍然是每分钟 128 个八分音符，但是变为四分音符为一拍，因此无须任何其他标注，拍速就会变成 64 BPM。直接使用 BPM 标注拍号，就辜负了拍号分母应有的作用。总而言之，每分钟的**全音长度是固定不变的「第一」拍速值**，而每分钟的**拍数是导出量**。

拍速在乐理属性中表示，形如 `hpm=<数值>`（二分音符）、`qpm=<数值>`（四分音符）或 `spm=<数值>`（八分音符），像这样：

<C.ScoreExample canLoad children={
`// highlight-next-line
P: 1=? 6/8 spm=128
---
N: 4 (3) 1 (2) | 2 - - |{3/4} 3 2 1 | 7d 1 2 |
`
} />

第一个字符后也可以加点，形如 `h.pm=<数值>`（二分附点音符）、`q.pm=<数值>`（四分附点音符）或 `s.pm=<数值>`（八分附点音符）。

<C.RealtimeScore children={
`// highlight-next-line
P: 1=? 12/8 q.pm=71
---
N: 0. 0. 0. 1(2) | 3(3) 3(3) 3. (343) | 3(5) 5(3) 5. (543) | 1(1) 1(1) 1(2) (321) |
`
} />

在乐理属性的拍速后添加一个斜杠 `/`，随后一串文本，即可用这串文本来代替精确的拍速。

<C.RealtimeScore children={
`// highlight-next-line
P: 1=? 12/8 q.pm=71/较慢
---
N: 0. 0. 0. 1(2) | 3(3) 3(3) 3. (343) | 3(5) 5(3) 5. (543) | 1(1) 1(1) 1(2) (321) |
`
} />

或者是 `/=` 后面加上自定义的拍速表述。

<C.RealtimeScore children={
`// highlight-next-line
P: 1=? 12/8 q.pm=71/=65~75  // 表示拍速可根据情感需要在此范围内变化
---
N: 0. 0. 0. 1(2) | 3(3) 3(3) 3. (343) | 3(5) 5(3) 5. (543) | 1(1) 1(1) 1(2) (321) |
`
} />

在音效试听中，如果没有指定拍速，将会默认为 `qpm=120`。

## 高级节奏 {#advanced}

这里是一些可能不那么常用的节奏写法。

### 以 8 为分母的拍号 {#eighth-beats}

上文我们提到，减时线应当在节拍组分划点处断开，并且当拍号分母为 `4` 时，节拍组分划点就是从小节开头开始整数拍的位置。但是，对于以 `8` 为分母的拍号，断开的规律便不再是从小节开头开始整数拍的位置，否则就会变成这样：

<C.RealtimeScore efRange={1} noCode children={
`P: 6/8 1=C spm=215
---
N: (3)(#2)(3) 5 (3) | 4 (5) 6. | (7)(6)(5) (5)(4)(3) | 3 - - |`
} />

看来节拍组分划点应该是间距更大的分划点。实际上，这取决于拍号的强弱规律。例如：

- 拍号为 $\frac{3}{8}$，三拍子的强弱规律为强-弱-弱，即 3 = 3，故减时线始终不断开。
- 拍号为 $\frac{4}{8}$，四拍子的强弱规律为强-弱-次强-弱，即 4 = 2 + 2，减时线在距离小节开头 2 拍处断开。
- 拍号为 $\frac{5}{8} = \frac{3}{8} + \frac{2}{8}$，强弱规律为 5 = 3 + 2，减时线在距离开头 3 拍处断开。
- 拍号为 $\frac{6}{8}$，强弱规律为 6 = 3 + 3，减时线在距离开头 3 拍处断开。

<C.RealtimeScore efRange={1} children={
`P: 1=? 4/4
Rp: time_lining=true  // 令小节宽度根据总时值调节
---
// highlight-next-line
N: /{3/8} (XXX) |{4/8} (XX)(XX) |{5/8, "5/8 = 3/8 + 2/8"} (XXX)(XX) |{6/8} (XXX)(XXX) |
`
} />

因此上面例子的正确写法如下：

<C.RealtimeScore efRange={1} children={
`P: 6/8 1=C spm=215
---
// highlight-next-line
N: (3#23) 5 (3) | 4 (5) 6. | (765) (543) | 3 - - |
`
} />

实际制谱中，你应当认真考虑应该使用以 4 为分母的拍号还是以 8 为分母的拍号。一般而言，仅当旋律的拍速足够快，以至于你认为体现出节拍的分组非常重要时，才应该使用以 8 为分母的拍号。

### 摇摆节奏 {#swing}

尝试听一听[《爱的华尔兹》](https://kuwo.cn/play_detail/220482857)的副歌部分。

不难听出其有着非常明显的特点——若取拍号 $\frac{6}{4}$，那么所有四分音符都是被分成前长后短的两份（像附点音符那样），而不是相等的两份。然而，进一步分析，会发现它们其实不是附点音符，而是 $2:1$ 的比例，也就是前两个音符被连起来的三连音。

<C.RealtimeScore efRange={[1,4]} children={
`P: 1=C 6/4
Rp: n=3 font_lyrics=Roman,CommonSerif/600/0.9
====
// highlight-next-line
N: T3(4) T3(4) T3(4) T5(4) T3(2) 2 | T1(2) T1(2) T1(2) T3(2) T1(7d) 7d |
Lc: 没有谁能比你更合我的拍，没有谁能代替你给我依赖，
---
// highlight-next-line
N: 6d 7d 1 5d 7d 1 | T4(3) T2(1) T2(3) 2 0 0 |
Lc: 甜蜜呀，幸福啊，圈圈圆圆转出来。
---
// highlight-next-line
N: T3(4) T3(4) T3(4) T5(4) T3(2) 2 | T1(2) T1(2) T1(2) T3(2) T1(7d) 7d |
Lc: 没有谁能比你更合我的拍，没有谁能给我你给过的爱，
`
} />

:::caution 谨慎使用

注意到这里将不同时值的音符（四分音符和八分音符）放在了一个三连音记号下面。这种写法**只有**在划分为 $2:1$ 的 $3$ 连音上能正常使用，其他节奏划分或者多连音均没有这一语法。

:::

用三连音表示这种节奏有些太过冗余了。事实上，不止这一首歌，许多现代歌曲均在四分音符上大量使用 $2:1$ 的节奏 $1\mathrm{q} = \left(\frac{2}{3} + \frac{1}{3}\right)\mathrm{q}$ 划分来代替二等分 $1\mathrm{q} = \left(\frac{1}{2} + \frac{1}{2}\right)\mathrm{q}$，这种现象称为**摇摆节奏**。摇摆节奏下，分割为 $2:1$ 的四分音符写作二等分，但是奏唱时需要进行「扭曲」处理。

在 Sparks NMN 中，摇摆节奏的标志添加在拍号上——在拍号后追加大写字母 `S`，即可启用摇摆节奏。

<C.RealtimeScore  children={
`// highlight-next-line
P: 1=C 6/4S
Rp: n=3 font_lyrics=Roman,CommonSerif/600/0.9
====
N: /{"S:摇摆八分音符"} (34)(34)(34)(54)(32) 2 | (12)(12)(12)(32)(17d) 7d |
Lc: 没有谁能比你更合我的拍，没有谁能代替你给我依赖，
---
N: 6d 7d 1 5d 7d 1 | (43)(21)(23) 2 0 0 |
Lc: 甜蜜呀，幸福啊，圈圈圆圆转出来。
---
N: (34)(34)(34)(54)(32) 2 | (12)(12)(12)(32)(17d) 7d |
Lc: 没有谁能比你更合我的拍，没有谁能给我你给过的爱，
`
} />

注意到摇摆节奏启用后，这里的八分音符间距不再相等，而是被调整以暗示摇摆节奏的时间划分。

需要注意，如果要在摇摆节奏下使用常规的三连音，不应该使用三连音记号，

<C.RealtimeScore efRange={[1,3]} children={
`// preserve-start
P: 1=C 6/4S
Rp: n=2 font_lyrics=Roman,CommonSerif/600/0.9
====
// highlight-next-line
N: /{"S:摇摆八分音符"} (65)(65)(63) 5 - 0 | (43)(43)(45) 5 0 T(555) | (17d)(17d)(12) 1 0 1 | 1 1 (23) 2 - 0 |
// preserve-end
A: "反面教材！"
`
} />

如你所见，上面乐谱中三连音音符的间距是不一致的！这是因为三连音也会被扭曲，计算方式为：

$\left(\dfrac{1}{3} + \dfrac{1}{3} + \dfrac{1}{3}\right)\mathrm{q}
= \overset{\frac{1}{2}}{\overbrace{\left(\dfrac{1}{3}_1 + \dfrac{1}{6}_2\right)}}\mathrm{q} + \overset{\frac{1}{2}}{\overbrace{\left(\dfrac{1}{6}_2 + \dfrac{1}{3}_3\right)}}\mathrm{q}
\rightarrow \overset{\frac{2}{3}}{\overbrace{\left(\dfrac{4}{9}_1 + \dfrac{2}{9}_2\right)}}\mathrm{q} + \overset{\frac{1}{3}}{\overbrace{\left(\dfrac{1}{9}_2 + \dfrac{2}{9}_3\right)}}\mathrm{q}
= \left(\dfrac{4}{9} + \dfrac{3}{9} + \dfrac{2}{9}\right)\mathrm{q}$

事实上，前 16 后 8 的节奏型 $\rm \underline{\underline{X}}\underline{\underline{X}}\underline{X}$ 在摇摆节奏下就是三连音，因为

$\left(\dfrac{1}{4} + \dfrac{1}{4} + \dfrac{1}{2}\right)\mathrm{q}
= \overset{\frac{1}{2}}{\overbrace{\left(\dfrac{1}{4} + \dfrac{1}{4}\right)}}\mathrm{q} + \overset{\frac{1}{2}}{\overbrace{\left(\dfrac{1}{2}\right)}}\mathrm{q}
\rightarrow \overset{\frac{2}{3}}{\overbrace{\left(\dfrac{1}{3} + \dfrac{1}{3}\right)}}\mathrm{q} + \overset{\frac{1}{3}}{\overbrace{\left(\dfrac{1}{3}\right)}}\mathrm{q}
= \left(\dfrac{1}{3} + \dfrac{1}{3} + \dfrac{1}{3}\right)\mathrm{q}$

因此上面的错误例子可以改写为：

<C.RealtimeScore efRange={[1,3]} children={
`P: 1=C 6/4S
Rp: n=2 font_lyrics=Roman,CommonSerif/600/0.9
====
// highlight-next-line
N: /{"S:摇摆八分音符"} (65)(65)(63) 5 - 0 | (43)(43)(45) 5 0 ((55)5) | (17d)(17d)(12) 1 0 1 | 1 1 (23) 2 - 0 |
`
} />

:::caution 非标准特性

尽管摇摆节奏并不算太罕见，但是在拍号后标注 `S` 表示摇摆节奏，则不是简谱的标准特性。像上面的例子中那样添加文字进行解释是必要的。

:::

如果拍号后标注的是小写字母 `s`，则变为对十六分音符使用摇摆节奏，八分音符下的节奏划分由 $\frac{1}{2}\mathrm{q} = \left(\frac{1}{4} + \frac{1}{4}\right)\mathrm{q}$ 变为 $\frac{1}{2}\mathrm{q} = \left(\frac{2}{6} + \frac{1}{6}\right)\mathrm{q}$。例如歌曲[《安娜的橱窗》](https://kuwo.cn/play_detail/274119909)（正确的歌词参考[此处](https://music-archive.sparkslab.art/0276/code?raw)）主歌的开头：

<C.RealtimeScore  children={
`// highlight-next-line
P: 1=C 4/4s
Rp: n=3 font_lyrics=Roman,CommonSerif/600/0.9
N: /{"s:摇摆十六分音符"} (6d(32))(36d)((2123))(26d) | (1(12))(17d)(6d7d)7d | (6d(32))(36d)((2123))(26d) |
Lc: 马车在奔跑，面具拉扯嘴角，月色拉开无人篇章。高傲笼中鸟，囚禁舞台中央
`
} />

这相当于，

<C.RealtimeScore  children={
`P: 1=C 4/4
Rp: n=3 font_lyrics=Roman,CommonSerif/600/0.9
// highlight-next-line
N: (6dT3(2))(36d)(T2(1)T2(3))(26d) | (1T1(2))(17d)(6d7d)7d | (6dT3(2))(36d)(T2(1)T2(3))(26d) |
Lc: 马车在奔跑，面具拉扯嘴角，月色拉开无人篇章。高傲笼中鸟，囚禁舞台中央
`
} />

:::info 提示

在 Sparks NMN 中，摇摆节奏标记 `S` 或 `s` 是拍号的一部分。如果一段旋律一部分有摇摆节奏，而另一部分没有，应当参照[变拍](/docs/tutorial-basics/musical-variation#change-beats)进行处理，其写法在后文中会提到。

:::

### 散板 {#zero-beats}

散板多见于戏曲音乐中。例如京剧中存在「有板有眼」和「有板无眼」的节拍样式，其中「板」表示重拍，「眼」表示轻拍。「有板有眼」就是二拍子，「有板无眼」实际上是一拍子，但是为了记谱方便，并不在每一拍的位置使用小节线，而是根本不要求使用小节线，小节线只作为辅助的语义分割。

讲人话，散板就是每小节拍数不确定的节拍形式。

在 Sparks NMN 中，将拍号的分子（每小节的拍数）指定为 0，就可以实现散板。拍号的分母仍然表示全音符的拍数（或者说以几分音符为一拍），仍然有意义。启用散板后，Sparks NMN 不再检查时值与拍号是否一致，只会检查每小节拍数是否是整数。

<C.RealtimeScore  children={
`// highlight-next-line
P: 1=C 0/4
N: 1 2 3 2 | 5 4 3 2 | 5 4 3 4 5 | 3 1 |
`
} />

拍号处仍然会显示 $\frac{0}{4}$，而非散板记号。这是有意的，因为散板记号不能有效表达出仍然有意义的拍号分母。

你可能希望调节小节宽度，使其正确反映每小节的时值。最简单的方法是启用「基于时值的小节宽度」特性。

<C.RealtimeScore  children={
`P: 1=C 0/4
// highlight-next-line
Rp: time_lining=true
N: 1 2 3 2 | 5 4 3 2 | 5 4 3 4 5 | 3 1 |
`
} />

有关调节布局的详细方法和原理，将在[布局](/docs/tutorial-layout/section-lining#time-lining)章节中详细介绍。

### 不完整小节 {#incomplete-sections}

这是一个六拍子的曲子，但是中间出于渲染气氛的需要，某个小节只有四拍（仍然遵循六拍子的强弱规律，但是被强行截断），后面又立刻恢复。这种情况下可以使用不完整小节表示。下面例子来自歌曲[《秘境茶会》](https://y.qq.com/n/ryqq/songDetail/003d9zJy03q4Gh)。

<C.RealtimeScore efRange={1} noCode children={
`P: 6/8 1=C qpm=117
---
// highlight-next-line
N: /{6/4} 6d (3#2) 3 4 3 2 | 2 7d - - 0 0 | 1 (17d) 1 3 (#5d6d) 7d | (6dd7dd) (1d3d) (6d7d) (1.(3)) /||
`
} />

这里第四个小节就是不完整小节。不完整小节右侧应当以特定的「不完整小节线」结束，不完整小节线的特点是带有一条虚线。普通小节线 `|` 的不完整版本写作 `/||`，终止线 `|||` 没有不完整版本。（歌曲结尾处的不完整小节还叫不完整小节吗？）

<C.ScoreExample canLoad children={
`P: 6/8 1=C qpm=117
---
// highlight-next-line
N: /{6/4} 6d (3#2) 3 4 3 2 | 2 7d - - 0 0 | 1 (17d) 1 3 (#5d6d) 7d | (6dd7dd) (1d3d) (6d7d) (1.(3)) /||`
} />

当右侧是不完整小节线时，Sparks NMN 将禁用这个小节的节拍校验，并且将始终以小节的具体内容（而非乐理属性中的拍号）推断其总时值。

## 挑战 {#challenges}

<C.Challenges>

<C.Challenge title='抄谱1'>

下面是一整段来自流行儿歌[《宝贝宝贝》](https://www.kuwo.cn/play_detail/9847974)（a.k.a 两只老虎爱跳舞）的旋律。尝试将它写出来！

记住，不要将整段旋律写在同一行代码中，那样会使代码可读性非常低。应当在合适的地方分碎片。

<C.RealtimeScore noCode efRange={[13,25]} children={
`P: 1=C 4/4
====
N: e / e / &lpr; 3 (35~) 5 0 | 3 (51e) (2e3e) 5e |
---
N: 1e. (7) (1e5) (31e) | 7 - - - | 6. (5) (64) (16) | 5 - - - |
---
N: 3 - 5 1e | 2e. (2e) 6 - | 5 (56) (7) 1e (2e) | 1e - - - &rpr; |
---
N: ||: 1 2 3 1 | 2 5 5 0 | 3 (66) 6 6 | 5 5 3 0 |
Lc: 两只老虎爱跳舞，小兔子乖乖拔萝卜，
---
N: 1. (1) 1 (66) | 5 3 5 0 | (2) 2 (3) (32) (13) | 2 - 0 0 |
Lc: 我和小鸭子学走路，童年是最美的礼物。
---
N: 1 2 3 1 | 2 (55) 5 0 | 3 6 6 1e | 7 6 5 0 |
Lc: 小螺号呀嘀嘀地吹，我学海鸥展翅飞。
---
N: 1. (1) 1 6 | 5 5 3 0 | (2) 2 (3) (32) (12) | 1 - 0 (05) |
Lc: 不怕风雨不怕累，快快把本领都学会。宝`
} />

<C.TryYourself />

你不必写出反复记号。

如果你阅读本节后已经看出来应该怎么加歌词了，不妨也试试自己把歌词加上。

<C.HintSolution>
<C.Hint>

回忆一下如何在代码中表示附点、延时线和减时线。

本节后半部分有一些代码示例中出现了一些简单的歌词的写法，并且它们确实很简单，模仿一下应该不是太难的事情。

</C.Hint>
<C.Solution>

<C.ScoreExample canLoad children={
`P: 1=C 4/4
---
N: 1 2 3 1 | 2 5 5 0 | 3 (66) 6 6 | 5 5 3 0 |
Lc: 两只老虎爱跳舞，小兔子乖乖拔萝卜，
---
N: 1. (1) 1 (66) | 5 3 5 0 | (2) 2 (3) (32) (13) | 2 - 0 0 |
Lc: 我和小鸭子学走路，童年是最美的礼物。
---
N: 1 2 3 1 | 2 (55) 5 0 | 3 6 6 1e | 7 6 5 0 |
Lc: 小螺号呀嘀嘀地吹，我学海鸥展翅飞。
---
N: 1. (1) 1 6 | 5 5 3 0 | (2) 2 (3) (32) (12) | 1 - 0 (05) |
Lc: 不怕风雨不怕累，快快把本领都学会。宝
`
} />

</C.Solution>
</C.HintSolution>

</C.Challenge>

<C.Challenge title='抄谱2'>

下面片段来自歌曲[《枕边童话》](https://www.kuwo.cn/play_detail/153791751)。先推断下面旋律的拍号，然后将其写出来。还是一样，不必写出反复记号，并且如果你知道怎么加歌词，把歌词也加上。

<C.RealtimeScore noCode efRange={[6,18]} children={
`P: 1=C 6/8 spm=140
Rp: font_lyrics=Roman,CommonSerif/600/0.95
====
Frp: n=5
N: - - &lpr; (06d) | (6d(6d7d)(16d)) (654) | (3. (4)(32)) 1 (5d) | 6d (3) 2 (3) | 6d - - &rpr; |
---
N: ||: ((32)(32)(31)) 2 (0) | ((32)(32)(37d)) 1(0) | (6d(6d7d)1)(121) | (235) 3 (0) |
Lc: 枕头下的童话书，私自收藏的幸福，少年的我想倾诉什么感触。
---
N: ((32)(32)(31)) 2 (0) | ((32)(32)(37d)) 1 (0) | (6d13) 2 (3) | 6d. 0 ((34)) |
Lc: 迷失森林的小鹿，会不会遇到女巫，故事拉开序幕。 星光
---
N: (4(43)(46)) (65.(5)) | (6(65)(67)) (1e7.(2)) | 3 ((32)) (342) | 3. 0 ((23)) |
Lc: 拨开最神秘的雾，踮起脚尖旋转舞步，恍恍惚惚听谁在哭。 月光
---
N: (4(43)(46)) (65.(5)) | (6(65)(67)) (1e7.(3)) | 4 (4) (461e) | 7~. (7(03)(#23)) |
Lc: 叮嘱窗外的植物，遇到孩子记得让路，谁会救赎我孤独。你是那
`
} />

注意到这里许多地方把第二条减时线在整数节拍处断开了。这种分组方式称为「嵌套分组」，也是一种改进可读性的方式。

这里有一个升调记号 `#`，不过相信你是知道如何表示的。

因为音符比较密，已经帮你调小了歌词字体。你可以在此模板的基础上编写。

<C.ScoreExample canLoad children={
`// highlight-next-line
P: 1=C // 请补全乐理属性
Rp: font_lyrics=Roman,CommonSerif/600/0.95
====
// highlight-next-line
// 这里开始写`
} />

<C.HintSolution>
<C.Hint>

减时线的括号语法是天生可以嵌套的，因此可以毫不困难地对第二条减时线进行分组，像是 `(()())` 这样。

升调 Re 的写法是 `#2`。

</C.Hint>
<C.Solution>

<C.ScoreExample canLoad children={
`P: 1=C 6/8 spm=140
Rp: font_lyrics=Roman,CommonSerif/600/0.95
---
N: ((32)(32)(31)) 2 (0) | ((32)(32)(37d)) 1(0) | (6d(6d7d)1)(121) | (235) 3 (0) |
Lc: 枕头下的童话书，私自收藏的幸福，少年的我想倾诉什么感触。
---
N: ((32)(32)(31)) 2 (0) | ((32)(32)(37d)) 1 (0) | (6d13) 2 (3) | 6d. 0 ((34)) |
Lc: 迷失森林的小鹿，会不会遇到女巫，故事拉开序幕。 星光
---
N: (4(43)(46)) (65.(5)) | (6(65)(67)) (1e7.(2)) | 3 ((32)) (342) | 3. 0 ((23)) |
Lc: 拨开最神秘的雾，踮起脚尖旋转舞步，恍恍惚惚听谁在哭。 月光
---
N: (4(43)(46)) (65.(5)) | (6(65)(67)) (1e7.(3)) | 4 (4) (461e) | 7~. (7(03)(#23)) |
Lc: 叮嘱窗外的植物，遇到孩子记得让路，谁会救赎我孤独。你是那
`
} />

</C.Solution>
</C.HintSolution>

</C.Challenge>

<C.Challenge title='改错'>

下面的乐谱有一些不恰当或不正确的写法，请予以修正。

<C.RealtimeScore  children={
`P: 1=? 4/4
---
N: 6d. (3) - - | #2. (7d) - - | 3. (1) - - | (3--) ((12))(32)(17d) |
---
N: 3. (1-) 3 (1) | #2. (7d) - (-(6d1)) | omit
`
} />

<C.HintSolution>
<C.Hint>

上文提到减时线和延时线一起使用有一些要注意的规范，还记得吗？

</C.Hint>
<C.Solution>

问题之一在于，一个环境中的音符不能在另一个环境中进行延时。例如第 1 小节的 `3` 在括号内，延时线在外部，这种写法是无效的；第 6 小节中的音符 `7d` 在一个括号内，但是两条延时线一个在括号外，一个在另一组括号内，这也是有问题的（你可以看到后者甚至没有显示）。

问题之二在于延时线不应该在减时线上使用，第 4，第 5 小节都有这个问题。

无法直接表示的复杂音符应该在尽可能低阶的分划点处断开，并且使用连音线表示。

<C.RealtimeScore  children={
`P: 1=? 4/4
---
// highlight-next-line
N: 6d. (3~) 3 - | #2. (7d~) 7d - | 3. (1~) 1 - | 3. ((12))(32)(17d) |
---
// highlight-next-line
N: 3. 1 3 (1) | #2. (7d~) 7d. ((6d1)) | omit
`
} />

</C.Solution>
</C.HintSolution>

</C.Challenge>

<C.Challenge title='优化格式'>

下面的乐谱可读性看起来非常糟糕。尝试修改它使其更容易阅读，但是不改变原来的意思。

<C.RealtimeScore  children={
`P: 1=? 4/4
---
N: ((5d)11(32)1(2)2) 4 | ((5d)22(43)2(3)3) 5 | ((6d)33(32)1(4)5) 6 | ((7)7(6)) (#56) 7 3e |
`
} />

<C.HintSolution>
<C.Hint>

读者觉得读懂这么长的连续减时线，就像要吃掉一头大象一样难。你要帮读者完成第一步。

</C.Hint>
<C.Solution>

切开它！

需要先计算一下具有被切分节奏的音符应该断开成什么样，然后将它们断开用连音线相连即可。

<C.RealtimeScore  children={
`P: 1=? 4/4
---
// highlight-next-line
N: ((5d)1(1~))((1321~))((12)2) 4 | ((5d)2(2~))((2432~))((23)3) 5 | ((6d)3(3~))((3321~))((14)5) 6 | ((7)7(6)) (#56) 7 3e |
`
} />

</C.Solution>
</C.HintSolution>

</C.Challenge>

<C.Challenge title='旋律听写'>

旋律听写，俗称「扒谱」，就是听一段旋律若干遍，并在听过之后或听的时候直接将其乐谱记录下来，而不参考其他乐谱。旋律听写是音乐基础能力的重要组成部分，也是检验对乐理和记谱规范理解程度的极佳方式。现在，我们来做一个这样的练习。

听这个[来源不明的音乐](https://music-archive.sparkslab.art/7001)的 2A<sub>1</sub> 和 2B<sub>1</sub> 段落。然后将主旋律的简谱记录下来。上述段落的时间区间是 37.9s ~ 71.8s。

完成后，可以使用音效试听工具来检查你的乐谱是否正确。

<C.TryYourself />

<C.HintSolution>
<C.Hint>

你可能遇到困难有这些：

- 找不到节拍。这个音乐中的节拍和鼓点是高度匹配的，尝试感受一下鼓点，其中那个最低沉最有「下行感」的鼓点就是所谓的「重拍」。
- 听不出音之间的关系。这种情况下，请尝试在听的同时用钢琴（虚拟钢琴也可以）来进行比对，找到音之间的距离。
- 无法确定基调。
  - 如果你能用唱名描述你听到的音，只是由于没有绝对音感找不出基调，这是无伤大雅的，你完全可以先写个 `1=?`，后续再用钢琴来确定。
  - 如果你能听出音之间的关系，却在犹豫应当用何种唱名表示，那么，你应当选择让升降调尽可能少的唱名。本旋律是自然小调旋律，主音应当是 La，并且可以不借助任何升降调记号就写出来。
- 无法确定节奏。
  - 首先，边听边打节拍肯定是必要的。
  - 如果节奏仍然显得扑朔迷离（通常表现为和你的节拍错开），可以尝试将你打节拍的速率加倍，也就是半拍打一下。这种技巧叫做「打分拍」。
  - 如果节奏仍然和节拍经常错开，你可以在节拍处假想出一个音来辅助你感受节拍，并在记谱的时候去掉。

不过，如果你的能力有限，实在完不成这个挑战也没有关系。这段旋律的节奏确实略有一些复杂。

</C.Hint>
<C.Solution>

<C.RealtimeScore  children={
`P: 1=C 4/4 qpm=115
---
N: 0 5 (3) 5 (6~) | (63) 3. (2) (12) | 3 (11~) 1 - | (07) (76) (0) 3 (0) |
---
N: (05) (55) (3) 5 (6~) | (63) 3 (02) (12) | 3 (53~) 3 - | (01e) (1e6) (1e6) (1e2e) |
---
N: 3 (66) (67) (1e7~) | (7) 5 (3~) 3 - | 6 6 (65) (45~) | (5) 3 (4~)(4) 5 (0) |
---
N: 0 (66) (67) (1e7~) | (7) 5 3 (5) (2e1e~) | 1e (6) 1e 2e (3e~) | (3e2e) 2e - - |
`
} />

</C.Solution>
</C.HintSolution>

</C.Challenge>

</C.Challenges>

## 接下来... {#then}

你已经会写绝大多数节奏了。接下来，我们了解一下音乐的另一个基本维度——音高。其实，这一方面的（常规）理论比节奏的要简单一些。
