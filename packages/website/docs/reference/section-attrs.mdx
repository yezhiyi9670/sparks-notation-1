---
sidebar_position: 6
description: 写在小节线上，小节开头或者末尾的东西
---
import C from '@site/src/mdx'

# 小节线属性 {#section-attrs}

关于什么是前置、自身和后置属性，你应该已经知道了。如果并非如此，请看[这里](/docs/reference/sections#separator-attrs)。

## 所有小节线属性 {#all-props}

|写法|说明|例子|前置|上方|后置|
|-|-|-|-|-|-|
|**布局调节**|
|`w=<宽度权重>`|布局时该小节的宽度权重因子|`w=1.3`| | |+|
|`t=<上边距>`|布局时增大小节与小节线属性之间的纵向间距|`t=1`| | |+|
|`p=<额外边距>`|布局时增大小节与小节线之间的横向距离|`p=1`| | |+|
|`*`|用于曲谱行：跳房子与标记符号不再避让这组小节线属性<br/>用于标记行：跳房子记号不再避让此行|`*`|+| |+|
|**结构记号**|
|`<迭代数>.`|标注迭代数，用于条件反复|`2.`|+| |+|
|`reset`|重置迭代数为 1，用于复杂反复结构|`reset`|+| |+|
|`x<耐久度>`|反复记号可以使用的次数|`x3`|+| |+|
|`D.S.`|结构反复记号|`D.S.`|+|+|+|
|`D.C.`|结构反复记号|`D.C.`|+|+|+|
|`Fine.`|结构终止|`Fine.`|+|+|+|
|`$`|结构反复目标|`$`|+|+|+|
|`@`|结构尾声传送门 (Coda)|`@`|+|+|+|
|**变更乐理属性**|
|`<拍速乐理属性>`|变更拍速|`spm=243`|+|+|+|
|`1<T?>=<基调>`|已知目标调性的转调，T 表示同时移调|`1T=#E4`|+|+|+|
|`d1<T?>=<变化量><<单位>?>`|已知差值的转调，单位默认为 Key|`d1=5th`|+|+|+|
|`<拍号>`|变更拍号|`6/8`|+|+|+|
|**自定义文本**|
|`"<文本>"`|段落标记|`"B"`| |+| |
|`"<文本>"`|普通文本|`"Text"`|+| |+|
|`["<文本>"]` / `[<文本>]`|另一种段落标记|`[B]` / `["B"]`|+| |+|
|`"<文本>"_"<下标>"`|段落标记|`"B"_"1"`| |+| |
|`"<文本>"_"<下标>"`|带下标的文本|`"Text"_"1"`|+| |+|
|`["<文本>"_"<下标>"]`|另一种段落标记|`["B"_"1"]`|+| |+|

:::caution 注意

变拍的写法既要保证人能看懂，又要保证[时值校验](/docs/tutorial-basics/complicated-beats#time-validation)正确。时值校验处理变拍时，**无视反复记号，仅从头到尾扫描一次乐谱**。

- **前置属性**会显示在小节线前，但被时值校验无视。
- **上方属性**不会显示，但是时值校验会在此处更新每小节的时值。
- **后置属性**既会显示在小节线后，又会被时值校验处理。

:::

## 限制 {#limits}

对于属性，我们有一些布局上的调整，比如标注行和跳房子记号会自动避让前后置属性。但是上方属性的布局目前存在一些限制。

### 示例一 {#exp-1}

<C.ScoreExample canLoad>{
`P: 1=C 4/4
// highlight-next-line
N: 1 1 5 5 |["A", $] 6 6 5 - | 4 4 3 3 | 2 2 1 - |
`}</C.ScoreExample>

小节线上方，即上方属性上只能标注一个属性，否则会重叠。请选择最重要的那个，其他属性移到前置或后置上。

<C.ScoreExample canLoad>{
`P: 1=C 4/4
// highlight-next-line
N: 1 1 5 5 |["A"]{$} 6 6 5 - | 4 4 3 3 | 2 2 1 - |
`}</C.ScoreExample>

同时使用上方属性和前后置属性时，它们仍然可能重叠。在前后置属性前面加空格字符串可以起到调整的作用。

<C.ScoreExample canLoad>{
`P: 1=C 4/4
// highlight-next-line
N: 1 1 5 5 |["A"]{" ", $} 6 6 5 - | 4 4 3 3 | 2 2 1 - |
`}</C.ScoreExample>

### 示例二 {#exp-2}

<C.ScoreExample canLoad>{
`P: 1=C 4/4
---
// highlight-next-line
N: 1 1 5 5 | 6 6 5 - |["B"]
---
J: 1.
N: 4 4 3 3 | 2 2 1 - |
`}</C.ScoreExample>

跳房子记号以及较长的标记可能与上方属性发生重叠。可以添加一个空白的后置属性让它们避让。尽管问题似乎没有得到完全解决，但这样确实会好很多。

<C.ScoreExample canLoad>{
`P: 1=C 4/4
---
N: 1 1 5 5 | 6 6 5 - |["B"]
---
J: 1.
// highlight-next-line
N: /{""} 4 4 3 3 | 2 2 1 - |
`}</C.ScoreExample>
